# 通知系统 UI 审查笔记

## 仪表盘页面观察

登录后仪表盘显示正常。侧边栏底部有铃铛图标（index 13），点击后弹出通知面板。

## 通知面板（Popover）观察

点击铃铛后弹出了通知面板，显示：
- 标题"消息通知"
- 铃铛图标 + "暂无消息"
- 没有公告区域显示（说明当前没有活跃公告）
- 面板没有"全部已读"按钮（因为没有未读消息）

## 发现的前端问题

### 问题1: 公告中使用了不存在的字段 `priority`
在 NotificationCenter.tsx 第143行：
```
{announcement.priority === "high" && (
  <Badge className="bg-red-500/20 text-red-400 text-xs">重要</Badge>
)}
```
但 announcements 表没有 `priority` 字段，只有 `isPinned` 和 `type`。
这个"重要"标签永远不会显示。应该改为使用 `isPinned` 或 `type === "error"` 来标记重要公告。

### 问题2: 通知面板没有分页加载
消息列表只获取前20条（limit: 20），没有"加载更多"或分页功能。
如果用户有大量消息，无法查看历史消息。

### 问题3: 公告只显示日期不显示时间
第151行：`new Date(announcement.createdAt).toLocaleDateString()`
只显示日期，不显示时间。而消息列表用的是 `toLocaleString()` 显示完整时间。
应该统一。

### 问题4: 通知面板高度固定400px
ScrollArea 高度固定为 400px，在小屏幕上可能溢出。

### 问题5: 消息列表在面板关闭时不查询
`enabled: open` - 只有面板打开时才查询消息列表，这是合理的优化。
但未读数量每30秒刷新一次，这也是合理的。

### 问题6: 没有消息详情展开功能
消息内容使用 `line-clamp-2` 只显示2行，但没有展开查看完整内容的功能。
长消息会被截断，用户无法查看完整内容。
